<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æŒ‡ç¤ºæ›¸</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <aside class="sidebar">
      <button id="item-0" class="menu-item" onclick="selectMenu(this,'top.html'); localStorage.clear(); location.reload();" title="æŒ‡ç¤ºæ›¸ãƒˆãƒƒãƒ—">æŒ‡ç¤ºæ›¸ãƒˆãƒƒãƒ—</button>
      <ul class="accordion">
        <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼1 é–‹å§‹ -->
        <li>
          <input type="checkbox" id="menu-0">
          <label for="menu-0" title="Whale"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ Whale</span></label>
          <ul class="submenu">
            <li>
              <input type="checkbox" id="menu-1">
              <label for="menu-1" title="Mode"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ Mode</span></label>
              <ul class="submenu">
                <li>
                  <input type="checkbox" id="menu-2">
                  <label for="menu-2" title="Common"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ Common</span></label>
                  <ul class="submenu">
                    <li>
                      <input type="checkbox" id="menu-3">
                      <label for="menu-3" title="Widget"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ Widget</span></label>
                      <ul class="submenu">
                        <li>
                          <input type="checkbox" id="menu-4">
                          <label for="menu-4" title="Character"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ Character</span></label>
                          <ul class="submenu">
                            <li>
                              <input type="checkbox" id="menu-5">
                              <label for="menu-5" title="Global"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ Global</span></label>
                              <ul class="submenu">
                                <li>
                                  <button id="item-1" class="menu-item" onclick="selectMenu(this,'/Whale/Mode/Common/Widget/Character/Global/WBP_Character_Main_Global.html')" title="WBP_Character_Main_Global">ğŸ“„ WBP_Character_Main_Global</button>
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼1 çµ‚äº† -->
        <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼1 é–‹å§‹ -->
        <li>
          <input type="checkbox" id="menu-0">
          <label for="menu-0" title="ãƒ¡ãƒ‹ãƒ¥ãƒ¼1"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ ãƒ¡ãƒ‹ãƒ¥ãƒ¼1</span></label>
          <ul class="submenu">
            <li>
              <input type="checkbox" id="menu-1">
              <label for="menu-1" title="ã‚µãƒ–1-1"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ ã‚µãƒ–1-1</span></label>
              <ul class="submenu">
                <li>
                  <input type="checkbox" id="menu-2">
                  <label for="menu-2" title="ã‚µãƒ–1-1-1"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ ã‚µãƒ–1-1-1</span></label>
                  <ul class="submenu">
                    <li>
                      <button id="item-1" class="menu-item" onclick="selectMenu(this,'content1.html')" title="ã‚ã„ã†ãˆãŠã‹ããã‘ã“ã•ã—ã™ã›ã">ğŸ“„ ã‚ã„ã†ãˆãŠã‹ããã‘ã“ã•ã—ã™ã›ã</button>
                    </li>
                    <li>
                      <button id="item-2" class="menu-item" onclick="selectMenu(this,'content2.html')" title="ãŸã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»">ğŸ“„ ãŸã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»</button>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <button id="item-3" class="menu-item" onclick="selectMenu(this,'content3.html')" title="ã‚µãƒ–1-2">ğŸ“„ ã‚µãƒ–1-2</button>
            </li>
          </ul>
        </li>
        <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼1 çµ‚äº† -->
        <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼2 é–‹å§‹ -->
        <li>
          <input type="checkbox" id="menu-3">
          <label for="menu-3" title="ãƒ¡ãƒ‹ãƒ¥ãƒ¼2"><span class="arrow">â–¶</span><span class="menu-label">ğŸ“ ãƒ¡ãƒ‹ãƒ¥ãƒ¼2</span></label>
          <ul class="submenu">
            <li>
              <button id="item-4" class="menu-item" onclick="selectMenu(this,'content4.html')" title="ã‚µãƒ–2-1">ğŸ“„ ã‚µãƒ–2-1</button>
            </li>
            <li>
              <button id="item-5" class="menu-item" onclick="selectMenu(this,'content4.html')" title="ã‚µãƒ–2-2">ğŸ“„ ã‚µãƒ–2-2</button>
            </li>
            <li>
              <button id="item-6" class="menu-item" onclick="selectMenu(this,'content4.html')" title="ã‚µãƒ–2-3">ğŸ“„ ã‚µãƒ–2-3</button>
            </li>
            <li>
              <button id="item-7" class="menu-item" onclick="selectMenu(this,'content4.html')" title="ã‚µãƒ–2-4">ğŸ“„ ã‚µãƒ–2-4</button>
            </li>
            <li>
              <button id="item-8" class="menu-item" onclick="selectMenu(this,'content4.html')" title="ã‚µãƒ–2-5">ğŸ“„ ã‚µãƒ–2-5</button>
            </li>
          </ul>
        </li>
        <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼2 çµ‚äº† -->
      </ul>
    </aside>
    <!-- ãƒªã‚µã‚¤ã‚ºç”¨ãƒãƒ³ãƒ‰ãƒ« -->
    <div class="resizer"></div>
    <!-- ãƒ¡ã‚¤ãƒ³è¡¨ç¤ºé ˜åŸŸ -->
    <main class="main-content">
      <iframe id="viewer" src="top.html"></iframe>
    </main>
  </div>
  <!-- JavaScript -->
  <script>
    const viewer = document.getElementById('viewer');
    const sidebar = document.querySelector('.sidebar');
    const resizer = document.querySelector('.resizer');
    
    // ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠæ™‚ã®å‡¦ç†
    function selectMenu(el, file) {
      // iframeã«èª­ã¿è¾¼ã¿
      viewer.src = file;
      
      // é¸æŠçŠ¶æ…‹ã‚’ä¿å­˜
      localStorage.setItem('activeMenuId', el.id);
      localStorage.setItem('activeContentUrl', file);
      
      // ãƒãƒƒã‚·ãƒ¥æ›´æ–°
      location.hash = file.replace(/\.html$/, '');
    }
    
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å¾©å…ƒ
    window.addEventListener('DOMContentLoaded', () => {
      const savedId = localStorage.getItem('activeMenuId');
      const savedUrl = localStorage.getItem('activeContentUrl');
      
      if (savedId && savedUrl) {
        const target = document.getElementById(savedId);
        if (target) {
          // ãƒšãƒ¼ã‚¸å¾©å…ƒ
          viewer.src = savedUrl;
        }
      }
      
      const currentPage = document.getElementById('viewer').getAttribute('src');
      if (!currentPage) return;
      
      // å¯¾å¿œã™ã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ¢ã™
      const target = [...document.querySelectorAll('.menu-item')]
        .find(btn => btn.getAttribute('onclick')?.includes(currentPage));
      
      // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯è¦ªéšå±¤ã‚’ãŸã©ã£ã¦é–‹ã
      let parent = target.closest('li');
      while (parent) {
        const cb = parent.querySelector('input[type="checkbox"]');
        if (cb) {
          cb.checked = true;
          parent.parentElement.querySelectorAll(':scope > li > input[type="checkbox"]').forEach(sibling => {
            if (sibling !== cb) sibling.checked = false;
          });
        }
        parent = parent.parentElement.closest('li');
      }
    });
    
    // iframe å†…ã‹ã‚‰å‘¼ã°ã‚Œã‚‹é–¢æ•°
    function navigateFromIframe(file) {
      viewer.src = file;
      location.hash = file.replace(/\.html$/, '');
      
      // ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
      const target = [...document.querySelectorAll('.menu-item')]
        .find(btn => btn.getAttribute('onclick')?.includes(file));
      if (target) {
        localStorage.setItem('activeMenuId', target.id);
        localStorage.setItem('activeContentUrl', file);
      }
    }
    
    // ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒªã‚µã‚¤ã‚ºå‡¦ç†
    let isResizing = false;
    let startX = 0;
    let startWidth = 0;
    
    resizer.addEventListener('mousedown', (e) => {
      isResizing = true;
      startX = e.clientX;
      startWidth = sidebar.offsetWidth;
      document.body.style.cursor = 'ew-resize';
      viewer.classList.add('disable-events');
      e.preventDefault();
    });
    
    document.addEventListener('mousemove', (e) => {
      if (!isResizing) return;
      const dx = e.clientX - startX;
      const newWidth = startWidth + dx;
      if (newWidth > 100 && newWidth < 800) {
        sidebar.style.width = newWidth + 'px';
      }
    });

    document.addEventListener('mouseup', () => {
      if (isResizing) {
        isResizing = false;
        document.body.style.cursor = 'default';
        viewer.classList.remove('disable-events');
      }
    });
  </script>
</body>
</html>